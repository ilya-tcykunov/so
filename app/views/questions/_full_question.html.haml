.row
  .col-md-12.question-container{data: {question_container: question.id}}
    = render partial: 'questions/question', locals: {question: question}
    .row.comments-container{data: {comments_container: ''}}
      .col-md-11.col-md-offset-1
        - if can? :new, Comment
          = button_tag 'Comment', type: 'button', data: {comment_new_button_for_id: new_comments_for_id(question), show_text: 'Comment', hide_text: 'Cancel'}, class: 'btn btn-default btn-xs'

        - if can? :new, Comment
          = render partial: 'comments/form', locals: {commentable: question, comment: Comment.new}

        = render partial: 'questions/comments_list', locals: {commentable: question}

.row
  .col-md-12
    %h2
      Answers (
      %span{data: {answers_count: ''}}= question.answers.count
      )

.row
  .answers-container.col-md-12{data: {answers_container: ''}}
    = render partial: 'questions/answers_list', locals: {question: question}

.row
  .col-md-12
    %h2= "Your answer"
    - if can? :new, Answer
      = form_for [question, answer], html: {role: 'form', class: 'form-horizontal'}, remote: true do |f|
        .error-messages

        .form-group
          = f.text_area :body, class: 'form-control'

        .form-group
          = f.submit class: 'btn btn-primary'
    - else
      %p
        = link_to 'You should sign in to answer', new_user_session_path

= subscribe_to "/questions/#{question.id}"