- question.answers.each do |answer|
  %div{data: {answer: answer.id}}
    %p{data: {answer_body_for_id: answer.id}}= answer.body

    - if can? :edit, answer
      = button_tag 'Edit', type: 'button', data: {answer_edit_button_for_id: answer.id, show_text: 'Edit', hide_text: 'Cancel'}, class: 'btn btn-default btn-xs'

    - if can? :new, Comment
      = button_tag 'Comment', type: 'button', data: {comment_new_button_for_id: new_comments_for_id(answer), show_text: 'Comment', hide_text: 'Cancel'}, class: 'btn btn-default btn-xs'

    - if can? :edit, answer
      = form_for [question, answer], html: {role: 'form', class: 'form-horizontal', style: 'display:none;', data: {answer_edit_form_for_id: answer.id}}, remote: true do |f|
        .error-messages

        .form-group
          = f.text_area :body, class: 'form-control', value: answer.body

        .form-group
          = f.submit class: 'btn btn-primary'

    - if can? :new, Comment
      = render partial: 'comments/form', locals: {commentable: answer, comment: Comment.new}

    .comments-container{data: {comments_container: ''}}
      = render partial: 'questions/comments_list', locals: {commentable: answer}